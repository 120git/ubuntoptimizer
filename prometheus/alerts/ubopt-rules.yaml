groups:
  - name: ubopt-health
    rules:
      - alert: RootFSHigh
        expr: (node_filesystem_avail_bytes{mountpoint="/",fstype!~"tmpfs|devtmpfs"} / node_filesystem_size_bytes{mountpoint="/",fstype!~"tmpfs|devtmpfs"}) < 0.15
        for: 10m
        labels:
          severity: warning
          service: ubopt
        annotations:
          summary: Root filesystem free space is low
          description: Free space on / is below 15% for >10m.
      - alert: ExporterStale
        expr: time() - ubopt_last_export_timestamp_seconds > 900
        for: 5m
        labels:
          severity: critical
          service: ubopt
        annotations:
          summary: ubopt exporter stale
          description: ubopt metrics exporter has not updated for over 15 minutes.
      - alert: SecurityUpdatesPending
        expr: ubopt_security_updates_pending > 0
        for: 30m
        labels:
          severity: info
          service: ubopt
        annotations:
          summary: Security updates pending
          description: One or more security updates are pending application.
